{% extends "base.html" %}
{% block title %} FQM - {{ page_title }} {% endblock %}

{% block page_content %}
<div id="app" class="container" style="margin-top: 20px;" v-cloak>
   
    
    <button class="btn btn-default btn-sm pull-right" @click= "loadexampleComponent">
        <div v-if="!TicketStatusComponent">Open Ticket Status Report</div>
        <div v-if="TicketStatusComponent">Close Ticket Status Report</div>
    </button>


    
    <!-- Component appears here -->
    <component :is="TicketStatusComponent"
    :report_route_url="'{{ url_for('reports.reports_data') }}'"
    :make_excel_url="'{{ url_for('reports.make_reports_excel') }}'"
    >
    </component>


</div>
{% endblock %}


{% block scripts %}


<script type="module">

    import { createApp, markRaw } from "{{ url_for('static', filename='vendor/vue/vue.esm-browser.prod.js') }}";

    createApp({
        delimiters: ['[[', ']]'],
    
        data() {
            return {
           
                TicketStatusComponent: null
            };
        },

        methods: {
        
            async loadexampleComponent() {
               // Dynamically load JS file from /static
                if (this.TicketStatusComponent) {
                this.TicketStatusComponent = null; // Unload component
                 return; // Already loaded
               }
               const module = await import("{{ url_for('static', filename='ticket_status_report.js') }}");
              this.TicketStatusComponent = markRaw(module.default);   // Set component
            }
        }
    }).mount('#app');
</script>

{% endblock %}
